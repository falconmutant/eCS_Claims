{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}
  eCS Claims
{% endblock title %}

{% block css %}
  <style type="text/css">
    #footer {
        padding: 4em 0 6em 0;
        text-align: center;
    }
    #footer .copyright {
        color: #999;
        font-size: 0.9em;
        line-height: 1em;
        margin: 2em 0 0 0;
        padding: 0;
        text-align: center;
    }
    #footer .copyright li {
        display: inline-block;
        list-style: none;
        margin-left: 1em;
        padding-left: 1em;
    }
  </style>
{% endblock css %}

{% block header %}
  <div id="jCrumbs" class="breadCrumb module">
    <ul>
      <li>
        <a href="/logged_in/"><i class="glyphicon glyphicon-home"></i></a>
      </li>
      <li>
        <a href="">Facturas</a>
    </li>
    <li>
        <a href="">Pendientes</a>
    </li>
    </ul>
  </div>
  <div class="row">
    <div class="12u">
      <section class="box">
        <h3>Playground</h3>
        <hr />
        <form role="form" action="{% url "explorer_playground" %}" method="post" id="editor">{% csrf_token %}
            {% if error %}
                <div class="alert alert-danger">{{ error|escape }}</div>
            {% endif %}
            <div class="panel panel-default sql-panel">
                <div class="panel-heading">
                  <div class="row">
                    <div class="col-md-6">
                      <span class="panel-title">Playground SQL</span>
                    </div>
                    {% if ql_id %}
                        <div class="col-md-6 text-right">
                          <small><a href="{% url "explorer_playground" %}?querylog_id={{ ql_id }}"><i class="glyphicon glyphicon-link"></i></a></small>
                        </div>
                    {% endif %}
                  </div>
                </div>
                <div class="panel-content">
                    <textarea class="form-control" cols="40" id="id_sql" name="sql" rows="20">{{ query.sql }}</textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="text-center">
                    <div class="btn-group">
                        <input type="submit" value="Refresh Preview" id="refresh_play_button" class="btn btn-default"/>
                        <input type="submit" value="Save As New Query" id="create_button" class="btn btn-default"/>
                        <input type="submit" value="Download CSV" id="download_play_button" class="btn btn-default"/>
                        <button type="button" class="btn btn-default" id="show_schema_button">Show Schema</button>
                        <button type="button" class="btn btn-default" id="hide_schema_button" style="display: none;">Hide Schema</button>
                        <button type="button" class="btn btn-default" id="format_button">Format</button>
                    </div>
                </div>
            </div>
            <input type="hidden" value="Playground Query" name="title" />
        </form>
        <hr />
        {% include 'explorer/preview_pane.html' %}
      </section>
    </div>
  </div>
{% endblock header %}

{% block javascript %}
  <script>
        $(function() {
            var e = new ExplorerEditor(queryId, dataUrl);
        });
    </script>
{% endblock javascript %}