{% extends 'base.html' %}

{% block title %}
  eCS Claims
{% endblock title %}

{% block css %}
  <style type="text/css">
    #footer {
        padding: 4em 0 6em 0;
        text-align: center;
    }
    #footer .copyright {
        color: #999;
        font-size: 0.9em;
        line-height: 1em;
        margin: 2em 0 0 0;
        padding: 0;
        text-align: center;
    }
    #footer .copyright li {
        display: inline-block;
        list-style: none;
        margin-left: 1em;
        padding-left: 1em;
    }
    canvas{
      margin-left: 80px;
    }

    @import url(http://fonts.googleapis.com/css?family=Montserrat:400,700);

    .circular-bar{
      text-align: center;
      .circular-bar-content{
        margin-bottom: 70px;
        margin-top: -95px;
        text-align: center;
        strong{
          display: block;
          font-weight: 600;
          @include font-size(18,24);
        }
        label{
          display: block;
          font-weight: 300;
          @include font-size(15,20);
        }
      }
    }
  </style>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jQuery-Knob/1.2.13/jquery.knob.min.js"></script>
{% endblock css %}

{% block header %}
  <div id="jCrumbs" class="breadCrumb module">
    <ul>
      <li>
        <a href="#"><i class="glyphicon glyphicon-home"></i></a>
      </li>
    </ul>
  </div>
  <div class="row">
    <div class="12u">
      <section class="box">
        <h2>Reclamaciones</h2>
        <hr />
        <div class="col-md-4">
          <div class="centeredcontainer">
            <p class="text-center">Total</p>
            <input type="text" value="{{total_claims}}" class="claim1" data-thickness=".15" disabled>
          </div>
        </div>
        <div class="col-md-4">
          <div class="centeredcontainer">
            <p class="text-center">Por Aprobar</p>
            <input type="text" value="{{falta_claims}}" class="claim2" data-thickness=".15" disabled>
          </div>
        </div>
        <div class="col-md-4">
          <div class="centeredcontainer">
            <p class="text-center">Resueltas</p>
            <input type="text" value="{{resuelto_claims}}" class="claim3" data-thickness=".15" disabled>
          </div>
        </div>
        <h2>Facturaci√≥n</h2>
        <hr />
        <div class="col-md-4">
          <div class="centeredcontainer">
            <p class="text-center">Total</p>
            <input type="text" value="{{total_invoices}}" class="invoice1" data-thickness=".15" disabled>
          </div>
        </div>
        <div class="col-md-4">
          <div class="centeredcontainer">
            <p class="text-center">Por Aprobar</p>
            <input type="text" value="{{falta_invoices}}" class="invoice2" data-thickness=".15" disabled>
          </div>
        </div>
        <div class="col-md-4">
          <div class="centeredcontainer">
            <p class="text-center">Resueltas</p>
            <input type="text" value="{{resuelto_invoices}}" class="invoice3" data-thickness=".15" disabled>
          </div>
        </div>
      </section>
    </div>
  </div>
{% endblock header %}
{% block javascript %}
  
  <script>
    $(".claim1").knob({
      'min':0,
      'max':{{total_claims}},
      'readOnly':true,
      'width':150,
      'height':150
    });
    $(".claim2").knob({
      'min':0,
      'max':{{total_claims}},
      "fgColor":"#ba1b1b",
      'readOnly':true,
      'width':150,
      'height':150
    });
    $(".claim3").knob({
      'min':0,
      'max':{{total_claims}},
      "fgColor":"#61b14c",
      'readOnly':true,
      'width':150,
      'height':150
    });
    $(".invoice1").knob({
      'min':0,
      'max':{{total_invoices}},
      'readOnly':true,
      'width':150,
      'height':150
    });
    $(".invoice2").knob({
      'min':0,
      'max':{{total_invoices}},
      "fgColor":"#ba1b1b",
      'readOnly':true,
      'width':150,
      'height':150
    });
    $(".invoice3").knob({
      'min':0,
      'max':{{total_invoices}},
      "fgColor":"#61b14c",
      'readOnly':true,
      'width':150,
      'height':150
    });
    $('.claim1').each(function () { 
      var elm = $(this);
      var color = elm.attr("data-fgColor");  
      var perc = elm.attr("value");  

      $({value: 0}).animate({ value: perc }, {
          duration: 1000,
          easing: 'swing',
          progress: function () {                  
            elm.val(Math.ceil(this.value)).trigger('change')
          }
      });

      //circular progress bar color
      $(this).append(function() {
          elm.parent().parent().find('.circular-bar-content').css('color',color);
          elm.parent().parent().find('.circular-bar-content label').text(perc+'%');
      });
    });
    $('.claim2').each(function () { 
      var elm = $(this);
      var color = elm.attr("data-fgColor");  
      var perc = elm.attr("value");  

      $({value: 0}).animate({ value: perc }, {
          duration: 1000,
          easing: 'swing',
          progress: function () {                  
            elm.val(Math.ceil(this.value)).trigger('change')
          }
      });

      //circular progress bar color
      $(this).append(function() {
          elm.parent().parent().find('.circular-bar-content').css('color',color);
          elm.parent().parent().find('.circular-bar-content label').text(perc+'%');
      });
    });
    $('.claim3').each(function () { 
      var elm = $(this);
      var color = elm.attr("data-fgColor");  
      var perc = elm.attr("value");  

      $({value: 0}).animate({ value: perc }, {
          duration: 1000,
          easing: 'swing',
          progress: function () {                  
            elm.val(Math.ceil(this.value)).trigger('change')
          }
      });

      //circular progress bar color
      $(this).append(function() {
          elm.parent().parent().find('.circular-bar-content').css('color',color);
          elm.parent().parent().find('.circular-bar-content label').text(perc+'%');
      });
    });
    $('.invoice1').each(function () { 
      var elm = $(this);
      var color = elm.attr("data-fgColor");  
      var perc = elm.attr("value");  

      $({value: 0}).animate({ value: perc }, {
          duration: 1000,
          easing: 'swing',
          progress: function () {                  
            elm.val(Math.ceil(this.value)).trigger('change')
          }
      });

      //circular progress bar color
      $(this).append(function() {
          elm.parent().parent().find('.circular-bar-content').css('color',color);
          elm.parent().parent().find('.circular-bar-content label').text(perc+'%');
      });
    });
    $('.invoice2').each(function () { 
      var elm = $(this);
      var color = elm.attr("data-fgColor");  
      var perc = elm.attr("value");  

      $({value: 0}).animate({ value: perc }, {
          duration: 1000,
          easing: 'swing',
          progress: function () {                  
            elm.val(Math.ceil(this.value)).trigger('change')
          }
      });

      //circular progress bar color
      $(this).append(function() {
          elm.parent().parent().find('.circular-bar-content').css('color',color);
          elm.parent().parent().find('.circular-bar-content label').text(perc+'%');
      });
    });
    $('.invoice3').each(function () { 
      var elm = $(this);
      var color = elm.attr("data-fgColor");  
      var perc = elm.attr("value");  

      $({value: 0}).animate({ value: perc }, {
          duration: 1000,
          easing: 'swing',
          progress: function () {                  
            elm.val(Math.ceil(this.value)).trigger('change')
          }
      });

      //circular progress bar color
      $(this).append(function() {
          elm.parent().parent().find('.circular-bar-content').css('color',color);
          elm.parent().parent().find('.circular-bar-content label').text(perc+'%');
      });
    });
  </script>
{% endblock javascript %}
